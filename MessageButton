package gyyzp.message;

import gyyzp.avg.Control;
import gyyzp.utils.Utility;

import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.Image;



public class MessageButton {

	private int id;

	private boolean usable;

	private boolean complete;

	private String label;

	private boolean click;

	private int width;

	private int height;

	private int x;

	private int y;

	private Image commandImage = Utility.loadImage("system/button.png");

	public MessageButton(final int no) {

		this.id = no;
		this.usable = true;
		this.label = ("按钮" + no).intern();
		this.x = 5;
		this.y = 62 * id + 5;
		this.width = 60;
		this.height = 60;

	}

	public void setDrawXY(int x, int y) {
		this.x = x;
		this.y = y;
	}

	public void setSize(int width, int height) {
		this.width = width;
		this.height = height;
	}

	public void draw(Graphics2D g) {
		if (!this.click) {
			return;
		}
		Utility.setAlpha(g, 0.75f);
		g.drawImage(commandImage, (int) x, (int) y, this.width, this.height,
				null);
		Utility.setAlpha(g, 1.0f);
		Utility.font(g,"华文新魏", 15, 1);
		Font font = g.getFont();
		int size = g.getFontMetrics(font).stringWidth(label);
		if (complete && usable) {
			Utility.color(g, 255, 255, 0);
		} else {
			if (usable) {
				Utility.color(g, 255, 255, 255);
			} else {
				Utility.color(g, 128, 128, 128);
			}
		}
		Utility.setAlpha(g, 0.75f);
		g.drawString(label, (int) x + this.width / 2 - size / 2, (int) y
				+ this.height / 2 + 5);
		Utility.setAlpha(g, 1.0f);
	}

	public void setName(final String name) {
		this.click = true;
		label = name;
	}

	public int checkClick() {
		if (!this.click || !usable)
			return -1;
		if (Control.left_click && complete && !Control.fg_click) {
			Control.fg_click = true;
			return id;
		}
		if (!Control.left_click && complete && Control.fg_click) {
			Control.fg_click = false;
		}
		return -1;
	}

	public void checkComplete() {
		if (!this.click) {
			return;
		}
		if ((double) Control.mouse.x > x
				&& (double) Control.mouse.x < x + (double) this.width
				&& (double) Control.mouse.y > y
				&& (double) Control.mouse.y < y + (double) this.height) {
			complete = true;
		} else {
			complete = false;
		}
	}

	public static void initialize(final MessageButton[] buttons) {
		for (int i = 0; i < buttons.length; i++) {
			buttons[i] = new MessageButton(i);
			buttons[i].click = false;
			buttons[i].usable = true;
		}
	}

	public boolean isClick() {
		return click;
	}

	public void setClick(boolean click) {
		this.click = click;
	}

	public Image getCommandImage() {
		return commandImage;
	}

	public void setCommandImage(Image commandImage) {
		this.commandImage = commandImage;
	}

	public boolean isComplete() {
		return complete;
	}

	public void setComplete(boolean complete) {
		this.complete = complete;
	}

	public int getHeight() {
		return height;
	}

	public void setHeight(int height) {
		this.height = height;
	}

	public int getId() {
		return id;
	}

	public void setId(int id) {
		this.id = id;
	}

	public String getLabel() {
		return label;
	}

	public void setLabel(String label) {
		this.label = label;
	}

	public boolean isUsable() {
		return usable;
	}

	public void setUsable(boolean usable) {
		this.usable = usable;
	}

	public int getWidth() {
		return width;
	}

	public void setWidth(int width) {
		this.width = width;
	}

	public int getX() {
		return x;
	}

	public void setX(int x) {
		this.x = x;
	}

	public int getY() {
		return y;
	}

	public void setY(int y) {
		this.y = y;
	}
}
